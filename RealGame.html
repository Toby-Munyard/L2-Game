<!doctype html>
<head>
    <title>Fruit Catcher</title>
</head>
<body>
    <canvas id="gameCanvas" width="1000" height="800"></canvas>
    <script>
        var canvas;
        var canvasContext;

        window.onload = function () {
                canvas = document.getElementById('gameCanvas');
                canvasContext = canvas.getContext('2d');

                document.addEventListener('keydown', keyPressed);
                document.addEventListener('keyup', keyReleased);

                setInterval(mainloop, 1000 / 50);
            } 
            //player vars
        var pXpos = 0;
        var pYpos = 0;
        const pSIZE = 20;
        var pXspeed = 5;
        var pYspeed = 5;
        var sans = new Image();
        sans.src = 'Images/sans.png';

        var eXpos = 0;
        var eYpos = 0;
        const eSIZE = 20;
        var eXspeed = 5;
        var eYspeed = 5;

        //Background vars
        var backgroundheight = 800;
        var backgroundwidth = 1000;
        var background = new Image();
        background.src = 'Images/forestbackground.jpg';

        //movement vars
        const LEFT_KEY = 37;
        const UP_KEY = 38;
        const RIGHT_KEY = 39;
        const DOWN_KEY = 40;
        var leftKeyPressed = false;
        var upKeyPressed = false;
        var rightKeyPressed = false;
        var downKeyPressed = false;

        var userName = '';

        while (userName == '' || userName == null) {
            userName = prompt('what is your name?');
        } //creates a prompt when game is launched asking the player's name and will not go away until something is entered

        function drawImg(src, x, y, w, h) {
            canvasContext.drawImage(src, x, y, w, h);
        } // end func this is how images are imported

            function mainloop(){
                drawImg(background, 0, 0, backgroundwidth, backgroundheight); //background
                drawImg(sans,pXpos,pYpos,60,90); //player
                colorRect(eXpos,eYpos,eSIZE,eSIZE,'red'); //enemy

                PlayerMove();
                enemyMove();
            }

            function enemyMove(){
                eYpos += eYspeed;

                if(eYpos > canvas.height){
                    eYpos = 0 - eSIZE;
                    eXpos = Math.floor(Math.random()*(canvas.width - eSIZE));
                }
            }

            function keyPressed(evt){
            if(evt.keyCode == LEFT_KEY){
                leftKeyPressed = true;
            }
            if(evt.keyCode == RIGHT_KEY){
                rightKeyPressed = true;
            }
            if(evt.keyCode == UP_KEY){
                upKeyPressed = true;
            }
            if(evt.keyCode == DOWN_KEY){
                downKeyPressed = true;
            }
        } //player movement

        function keyReleased(evt){
            if(evt.keyCode == LEFT_KEY){
                leftKeyPressed = false;
            }
            if(evt.keyCode == RIGHT_KEY){
                rightKeyPressed = false;
            }
            if(evt.keyCode == UP_KEY){
                upKeyPressed = false;
            }
            if(evt.keyCode == DOWN_KEY){
                downKeyPressed = false;
            }
        } //player movement

        function PlayerMove() {
            if (rightKeyPressed) {
                pXpos += pXspeed;
                if (pXpos > canvas.width) {
                    pXpos = 0;
                }
            }
            if (leftKeyPressed) {
                pXpos -= pXspeed;
                if (pXpos < 0 - pSIZE) {
                    pXpos = canvas.width - pSIZE;
                }
            }
            if (upKeyPressed) {
                pYpos -= pYspeed;
                if (pYpos < 0 - pSIZE) {
                    pYpos = canvas.height - pSIZE;
                }
            }
            if (downKeyPressed) {
                pYpos += pYspeed;
                if (pYpos > canvas.width) {
                    pYpos = 0;
                }
            }
        } //player movement



            function colorRect(x,y,w,h,c){
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x,y,w,h);
        }
</script>
</body>     